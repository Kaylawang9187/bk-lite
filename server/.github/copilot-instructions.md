本项目遵循一致性强、模块清晰、代码简洁的设计理念。Copilot 参与开发时，请严格遵守以下规则与思维流程，确保生成代码符合团队整体风格与架构要求。

⸻

✅ 思维流程要求（务必遵循）

1. 问题本质分析
	•	明确目标：这个任务究竟是为了解决什么问题？背后的核心价值是什么？
	•	理解上下文：是否已经在其他 apps/ 中有类似功能？是否重复造轮子？

2. 需求分析
	•	输入 / 输出：有哪些输入？预期输出是什么？
	•	功能点：具体实现包含哪些必要功能？是否有隐含要求（如鉴权、审计、国际化等）？

3. 设计思考
	•	模块划分：需要创建新模块/模型/API 吗？还是应该复用已有代码？
	•	数据结构：是否已有结构可以复用？是否需要添加新的字段？
	•	扩展性：未来是否可能扩展？但禁止过度设计！

4. 编码实现
	•	参考 apps/mlops、apps/cmdb、apps/node_mgmt、apps/opspilot 等模块的代码风格与目录结构。
	•	保持函数简短清晰，命名语义明确，注释必要但不过度。
	•	单元测试必须覆盖核心逻辑，可参考 tests/ 中已有测试风格。
	•	严格遵循代码规范（详见 .flake8、pyproject.toml 等配置）

5. 全局检查
	•	确保改动不会破坏其他模块或公共逻辑（如 utils、base_model、middleware 等）
	•	如果涉及 API 变更，确保更新对应文档与 OpenAPI 定义
	•	统一使用项目内已有的依赖与方法，避免引入重复或不必要的库

⸻

🔒 第三方依赖限制
	•	仅可使用 requirements/ 目录中列出的依赖。
	•	如需新增依赖，需提交评审说明：为什么需要、是否已有可复用模块、是否轻量、安全、维护活跃。

⸻

🚫 禁止行为
	•	❌ 不考虑项目上下文直接编码
	•	❌ 模糊命名（如 data, info, obj 等）
	•	❌ 写重复功能而不复用
	•	❌ 引入未审核依赖
	•	❌ 过度设计（YAGNI 原则）

⸻

📌 通用设计建议

场景	建议方式
数据模型扩展	使用 BaseModel, 保持模型职责单一
后台异步任务	使用项目内已有 Celery 封装（如 opspilot.tasks）
工具类函数组织	放入 apps/core/utils/ 中，避免散落
权限校验	优先复用已有逻辑，如 check_user_permission
⸻

📣 示例流程

以下是 Copilot 开发一个新 API 功能的推荐流程：
	1.	理解背景：该 API 是否已有类似接口？是否已有服务层逻辑？
	2.	确定边界：输入参数有哪些？是否需要鉴权？是否涉及数据库操作？
	3.	设计方案：是否应新建 service.py 方法？是否需要写 schema？
	4.	编码实现：保持代码结构清晰，逻辑分层，尽量小函数。
	5.	测试验证：覆盖关键路径，mock 依赖，确保行为正确。
	6.	对齐规范：检查命名、注释、格式，保持团队统一风格。

⸻

✅ 提交前 Checklist
	•	是否有全局视角审视过改动？
	•	是否已查找是否已有类似功能可复用？
	•	是否有完善的测试覆盖？
	•	是否遵循项目代码规范？
	•	是否考虑权限、异常、安全、日志等基本维度？

⸻

📌 “优秀的代码，是团队风格的一致体现。” —— 本项目的共识

