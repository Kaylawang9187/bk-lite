[
  {
    "id": "Filebeat_linux",
    "name": "Filebeat",
    "controller_default_run": false,
    "icon": "",
    "node_operating_system": "linux",
    "service_type": "exec",
    "executable_path": "/opt/fusion-collectors/bin/filebeat",
    "execute_parameters": "-c %s",
    "validation_parameters": "",
    "default_template": "",
    "introduction": "Filebeat is a lightweight shipper for forwarding and centralizing log data using official Logstash protocol.",
    "enabled_default_config": true,
    "default_config": {
      "nats": "# ================================== General ===================================\n# Filebeat基础配置\nname: \"filebeat-${node.ip}\"\ntags: [\"bk-lite\", \"logstash\"]\n\n# ================================== Logging ===================================\n# Filebeat自身日志配置\nlogging.level: info\nlogging.to_files: true\nlogging.files:\n  path: /opt/fusion-collectors/log/filebeat\n  name: filebeat\n  keepfiles: 7\n  permissions: 0600\n\n# ================================= Processors =================================\n# 数据处理器：在Filebeat端完成日志处理\nprocessors:\n  # 添加主机元数据\n  - add_host_metadata:\n      when.not.contains.tags: forwarded\n      netinfo.enabled: false\n      cache.ttl: 5m\n  # 添加基础标识字段\n  - add_fields:\n      target: \"\"\n      fields:\n        node_ip: \"${node.ip}\"\n        cloud_region: \"${node.cloud_region}\"\n        collect: \"filebeat\"\n        processed_at: \"@timestamp\"\n\n# ================================== Outputs ===================================\noutput.logstash:\n  # Vector Logstash 接收地址\n  hosts: [\"localhost:15044\"]\n\n  # 负载均衡配置\n  loadbalance: true\n\n  # 性能优化配置\n  worker: 1\n  bulk_max_size: 2048\n  timeout: 30s\n\n  # 重试配置\n  max_retries: 3\n  backoff.init: 1s\n  backoff.max: 60s\n\n# ============================== Filebeat inputs ===============================\nfilebeat.inputs:\n- type: filestream\n  id: default-logs\n  enabled: true\n  paths:\n    - /opt/fusion-collectors/log/*.log\n    - /opt/fusion-collectors/log/app/*.log\n  fields:\n    log_type: \"application\"\n    component: \"default\"\n  fields_under_root: false\n"
    }
  }
]
