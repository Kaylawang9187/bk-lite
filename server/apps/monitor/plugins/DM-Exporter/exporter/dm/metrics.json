{
  "plugin": "DM-Exporter",
  "plugin_desc": "The DM-Exporter collects Dameng database performance metrics including session statistics, tablespace usage, lock information, and replication status.",
  "name": "DM",
  "icon": "dm",
  "type": "Database",
  "metrics": [
    {
      "metric_group": "Base",
      "name": "up",
      "query": "up_gauge{__$labels__,instance_type='dm'}",
      "display_name": "Plugin running status",
      "instance_id_keys": ["instance_id"],
      "data_type": "Enum",
      "unit": "[{\"id\":1,\"name\":\"Normal\",\"description\":\"Service is running normally\",\"color\":\"#52c41a\"},{\"id\":0,\"name\":\"Abnormal\",\"description\":\"Service is stopped or unavailable\",\"color\":\"#ff4d4f\"}]",
      "dimensions": [],
      "description": "Reflects the real-time operation of the dameng plugin, a basic indicator for normal monitoring, ensuring effective data collection."
    },
    {
      "metric_group": "Sessions",
      "name": "dm_exporter_connections",
      "query": "dm_exporter_connections_gauge{__$labels__}",
      "display_name": "Current number of connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Shows current sessions connected to the Dameng database; excessive numbers may reduce performance, helping judge database load."
    },
    {
      "metric_group": "Sessions",
      "name": "dm_exporter_executions_total",
      "query": "dm_exporter_executions_total_counter{__$labels__}",
      "display_name": "Total number of executed SQL statements",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Total cumulative SQL statements executed, reflecting business processing volume, aiding in assessing database busyness."
    },
    {
      "metric_group": "Sessions",
      "name": "dm_exporter_session_rests",
      "query": "dm_exporter_session_rests_gauge{__$labels__}",
      "display_name": "Number of available sessions",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Number of sessions accepting new connections, reflecting connection capacity to prevent exhaustion."
    },
    {
      "metric_group": "Sessions",
      "name": "dm_exporter_session_used_ratio",
      "query": "dm_exporter_session_used_ratio_gauge{__$labels__}",
      "display_name": "Session usage rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "percent",
      "dimensions": [],
      "description": "Ratio of used sessions to total, high rate indicates tight connection resources, needing attention to expansion."
    },
    {
      "metric_group": "Sessions",
      "name": "dm_exporter_slow_query",
      "query": "dm_exporter_slow_query_gauge{__$labels__}",
      "display_name": "Slow queries exceeding 2 seconds",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "SQL queries taking over 2 seconds, indicating inefficiency, an important reference for SQL optimization."
    },
    {
      "metric_group": "Tablespace",
      "name": "dm_exporter_tablespace_used_ratio",
      "query": "dm_exporter_tablespace_used_ratio_gauge{__$labels__}",
      "display_name": "Tablespace usage rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "percent",
      "dimensions": [
        {"name": "TABLESPACE_NAME", "description": "Tablespace name"}
      ],
      "description": "Ratio of used to total tablespace; high rate may cause storage shortage, needing cleanup or expansion."
    },
    {
      "metric_group": "Tablespace",
      "name": "dm_exporter_tablespace_used_size",
      "query": "dm_exporter_tablespace_used_size_gauge{__$labels__}",
      "display_name": "Used tablespace size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "decmbytes",
      "dimensions": [
        {"name": "TABLESPACE_NAME", "description": "Tablespace name"}
      ],
      "description": "Space occupied in the tablespace, intuitively reflecting storage consumption, facilitating progress tracking."
    },
    {
      "metric_group": "Tablespace",
      "name": "dm_exporter_tablespace_free_size",
      "query": "dm_exporter_tablespace_free_size_gauge{__$labels__}",
      "display_name": "Remaining tablespace size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "decmbytes",
      "dimensions": [
        {"name": "TABLESPACE_NAME", "description": "Tablespace name"}
      ],
      "description": "Unused space in the tablespace, indicating remaining resources to prevent business impact from insufficient space."
    },
    {
      "metric_group": "Locks",
      "name": "dm_exporter_deadlock_count",
      "query": "dm_exporter_deadlock_count_counter{__$labels__}",
      "display_name": "Cumulative number of deadlocks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Cumulative deadlock occurrences; excessive ones indicate business logic or SQL design issues as they block transactions."
    },
    {
      "metric_group": "Locks",
      "name": "dm_exporter_2pc_pending",
      "query": "dm_exporter_2pc_pending_gauge{__$labels__}",
      "display_name": "Number of long-term two-phase transaction locks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Count of long-lasting two-phase transaction locks, potentially occupying resources long and affecting concurrency."
    },
    {
      "metric_group": "Locks",
      "name": "dm_exporter_locks",
      "query": "dm_exporter_locks_gauge{__$labels__}",
      "display_name": "Number of processes acquiring locks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Count of processes successfully getting locks, reflecting resource-holding processes to aid lock competition analysis."
    },
    {
      "metric_group": "Locks",
      "name": "dm_exporter_lock_blocks",
      "query": "dm_exporter_lock_blocks_gauge{__$labels__}",
      "display_name": "Number of processes waiting for locks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Count of processes waiting for locks; excessive ones indicate fierce competition, possibly delaying transactions."
    },
    {
      "metric_group": "RedoAndRoll",
      "name": "dm_exporter_redo_file_size",
      "query": "dm_exporter_redo_file_size_gauge{__$labels__}",
      "display_name": "ReDo file size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "decmbytes",
      "dimensions": [
        {"name": "PATH", "description": "File path"}
      ],
      "description": "Total capacity of redo log files, affecting recovery ability; ensure enough space for transaction records."
    },
    {
      "metric_group": "RedoAndRoll",
      "name": "dm_exporter_redo_log_size",
      "query": "dm_exporter_redo_log_size_gauge{__$labels__}",
      "display_name": "ReDo log size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "decmbytes",
      "dimensions": [
        {"name": "PATH", "description": "File path"},
        {"name": "STATUS", "description": "Log status"}
      ],
      "description": "Actual data volume of redo logs, reflecting generation speed, an important indicator for log management."
    },
    {
      "metric_group": "RedoAndRoll",
      "name": "dm_exporter_roll_state",
      "query": "dm_exporter_roll_state_gauge{__$labels__}",
      "display_name": "Rollback status",
      "instance_id_keys": ["instance_id"],
      "data_type": "Enum",
      "unit": "[{\"id\":0,\"name\":\"No rollback\",\"description\":\"No rollback in progress\",\"color\":\"#52c41a\"},{\"id\":1,\"name\":\"Rolling back\",\"description\":\"Rollback in progress\",\"color\":\"#faad14\"},{\"id\":2,\"name\":\"Rollback failed\",\"description\":\"Rollback operation failed\",\"color\":\"#ff4d4f\"}]",
      "dimensions": [
        {"name": "ROLL_TYPE", "description": "Rollback type"}
      ],
      "description": "Shows progress of current rollback operations, helping know if transaction rollbacks proceed normally."
    },
    {
      "metric_group": "RedoAndRoll",
      "name": "dm_exporter_roll_size",
      "query": "dm_exporter_roll_size_gauge{__$labels__}",
      "display_name": "Rollback page size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [
        {"name": "ROLL_TYPE", "description": "Rollback type"}
      ],
      "description": "Capacity of each page in the rollback segment, affecting rollback efficiency and storage usage."
    },
    {
      "metric_group": "Memory",
      "name": "dm_exporter_buffer_cache_hit_ratio",
      "query": "dm_exporter_buffer_cache_hit_ratio_gauge{__$labels__}",
      "display_name": "Cache hit rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "percent",
      "dimensions": [
        {"name": "HIT_NAME", "description": "Cache hit type"}
      ],
      "description": "Ratio of data fetched from cache; higher rate means better cache usage, reducing disk I/O and improving performance."
    },
    {
      "metric_group": "Memory",
      "name": "dm_exporter_memory_used_size",
      "query": "dm_exporter_memory_used_size_gauge{__$labels__}",
      "display_name": "Memory usage",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "decmbytes",
      "dimensions": [],
      "description": "Memory occupied by the database currently, reflecting consumption to prevent insufficient memory affecting operation."
    },
    {
      "metric_group": "Memory",
      "name": "dm_exporter_shared_pool_size",
      "query": "dm_exporter_shared_pool_size_gauge{__$labels__}",
      "display_name": "Shared memory size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Allocated shared memory capacity for inter-process data sharing, affecting concurrent processing efficiency."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_checkpoint_dirty_pages",
      "query": "dm_exporter_checkpoint_dirty_pages_gauge{__$labels__}",
      "display_name": "CheckPoint redo log blocks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Number of redo log blocks related to checkpoints, reflecting processed logs, related to recovery speed."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_checkpoint_interval_time",
      "query": "dm_exporter_checkpoint_interval_time_gauge{__$labels__}",
      "display_name": "CheckPoint interval",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "s",
      "dimensions": [],
      "description": "Time between two checkpoints, affecting log processing during recovery and system overhead."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_index_used_space",
      "query": "dm_exporter_index_used_space_gauge{__$labels__}",
      "display_name": "Number of index blocks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [
        {"name": "OWNER", "description": "Index owner"},
        {"name": "INDEX_NAME", "description": "Index name"}
      ],
      "description": "Data blocks occupied by indexes, reflecting scale; excessive ones may affect efficiency and storage."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_load_five_average",
      "query": "avg(dm_exporter_load_five_average_gauge{__$labels__}[5m])",
      "display_name": "Database workload every 5 minutes",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Task volume processed in 5 minutes, reflecting short-term load fluctuations, facilitating timely resource adjustment."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_open_cursor",
      "query": "dm_exporter_open_cursor_gauge{__$labels__}",
      "display_name": "Number of open cursors",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Currently open cursors; excessive ones occupy resources, possibly causing memory leaks or performance issues."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_table_used_space",
      "query": "dm_exporter_table_used_space_gauge{__$labels__}",
      "display_name": "Number of table blocks",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [
        {"name": "OWNER", "description": "Table owner"},
        {"name": "TABLE_NAME", "description": "Table name"}
      ],
      "description": "Data blocks occupied by table data, reflecting table scale, an indicator for assessing table storage."
    },
    {
      "metric_group": "Others",
      "name": "dm_exporter_unusable_index",
      "query": "dm_exporter_unusable_index_gauge{__$labels__}",
      "display_name": "Number of invalid indexes",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "short",
      "dimensions": [],
      "description": "Total invalid indexes; they affect query efficiency and need timely reconstruction or deletion."
    },
    {
      "metric_group": "BackUp",
      "name": "dm_exporter_backup_is_status",
      "query": "dm_exporter_backup_is_status_gauge{__$labels__}",
      "display_name": "Primary-standby instance status",
      "instance_id_keys": ["instance_id"],
      "data_type": "Enum",
      "unit": "[{\"id\":0,\"name\":\"Primary running\",\"description\":\"Primary instance running, standby not running\",\"color\":\"#52c41a\"},{\"id\":1,\"name\":\"Standby running\",\"description\":\"Primary instance not running, standby running\",\"color\":\"#52c41a\"},{\"id\":2,\"name\":\"Both running\",\"description\":\"Both primary and standby instances running\",\"color\":\"#52c41a\"},{\"id\":3,\"name\":\"Both stopped\",\"description\":\"Both primary and standby instances not running\",\"color\":\"#ff4d4f\"}]",
      "dimensions": [
        {"name": "MAL_HOST", "description": "MAL host address"},
        {"name": "MAL_INST_HOST", "description": "MAL instance host"},
        {"name": "INSTANCE_NAME", "description": "Instance name"},
        {"name": "HOST_NAME", "description": "Host name"},
        {"name": "OGUID", "description": "Object GUID"}
      ],
      "description": "Operation status of primary and standby database instances (e.g., running, stopped) to ensure normal architecture."
    },
    {
      "metric_group": "BackUp",
      "name": "dm_exporter_backup_i_mode",
      "query": "dm_exporter_backup_i_mode_gauge{__$labels__}",
      "display_name": "Primary-standby instance mode",
      "instance_id_keys": ["instance_id"],
      "data_type": "Enum",
      "unit": "[{\"id\":0,\"name\":\"Primary RW\",\"description\":\"Primary read-write, standby read-only\",\"color\":\"#52c41a\"},{\"id\":1,\"name\":\"Standby RW\",\"description\":\"Primary read-only, standby read-write\",\"color\":\"#52c41a\"},{\"id\":2,\"name\":\"Both RO\",\"description\":\"Both primary and standby read-only\",\"color\":\"#faad14\"}]",
      "dimensions": [
        {"name": "MAL_HOST", "description": "MAL host address"},
        {"name": "MAL_INST_HOST", "description": "MAL instance host"},
        {"name": "INSTANCE_NAME", "description": "Instance name"},
        {"name": "HOST_NAME", "description": "Host name"},
        {"name": "OGUID", "description": "Object GUID"}
      ],
      "description": "Working mode of primary-standby instances (e.g., primary read-write, standby read-only), clarifying roles."
    },
    {
      "metric_group": "selfMonitor",
      "name": "scrape_duration_seconds",
      "query": "scrape_duration_seconds_gauge{__$labels__,instance_type='dm'}",
      "display_name": "Last capture time of monitoring probe",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "s",
      "dimensions": [],
      "description": "Time of the last data collection by the monitoring probe, reflecting timeliness to ensure up-to-date data."
    }
  ]
}